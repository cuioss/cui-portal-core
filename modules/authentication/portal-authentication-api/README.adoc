= portal-authentication-api

== Overview
Provides types for handling authentication and authorization related information within the cui-portal.
It serves as an abstraction layer over different authentication and authorization mechanisms.
See link:../[portal-authentication] for the different runtime implementations.

== Key Components

=== AuthenticatedUserInfo
The core interface representing information about an authenticated user:

* Authentication status
* User roles and groups
* User identifiers (display name, technical ID)
* System context and additional attributes

=== BaseAuthenticatedUserInfo
A concrete implementation of `AuthenticatedUserInfo` that provides:

* Builder pattern for easy instantiation
* Immutable state for thread safety
* Extensible context map for custom attributes

=== AuthenticationFacade
Interface defining the authentication contract:

* User context retrieval
* Logout functionality
* Authentication source identification

=== PortalUserEnricher
Interface for enriching user information:

* Allows multiple implementations
* Priority-based ordering
* Chainable enrichment process

== Maven Coordinates

[source, xml]
----
    <dependency>
        <groupId>de.cuioss.portal.authentication</groupId>
        <artifactId>portal-authentication-api</artifactId>
    </dependency>
----

== Usage Examples

=== Basic Authentication Check
[source,java]
----
@Inject
private AuthenticatedUserInfo userInfo;

public void someMethod() {
    if (userInfo.isAuthenticated()) {
        // Handle authenticated user
        String displayName = userInfo.getDisplayName();
        List<String> roles = userInfo.getRoles();
    }
}
----

=== Role-Based Access Control
[source,java]
----
@Inject
private AuthenticatedUserInfo userInfo;

public void restrictedOperation() {
    if (userInfo.isUserInRole("ADMIN")) {
        // Perform admin operation
    }
}
----

=== Custom User Enrichment
[source,java]
----
@Priority(PortalPriorities.PORTAL_CORE_LEVEL)
public class CustomUserEnricher implements PortalUserEnricher {
    
    @Override
    public AuthenticatedUserInfo enrich(AuthenticatedUserInfo userInfo) {
        // Add custom attributes or modify user information
        return userInfo;
    }
}
----

== Thread Safety
All components in this module are designed to be thread-safe:

* Immutable state in `BaseAuthenticatedUserInfo`
* CDI-managed components with proper scoping
* No shared mutable state