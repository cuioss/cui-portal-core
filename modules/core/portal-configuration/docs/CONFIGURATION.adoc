= Portal Configuration Best Practices
:toc:
:toclevels: 3

== Overview
This document provides best practices and guidelines for using the Portal Configuration module effectively.

== Key Concepts

=== Configuration Hierarchy
The portal configuration follows a hierarchical structure with well-defined prefixes:

[source]
----
portal.                    # Base prefix for all portal configurations
├── configuration.        # Core configuration settings
├── session.             # Session-related settings
├── resource.            # Resource handling configuration
├── theme.               # Theme configuration
├── view.                # View-related settings
├── pages.               # Page-specific configuration
└── listener.            # Event listener configuration
----

=== Configuration Types
The module provides specialized configuration types for common use cases:

* Lists: `ConfigAsList` for comma-separated values
* Sets: `ConfigAsSet` for unique value collections
* Paths: `ConfigAsPath` for file system paths
* Locales: `ConfigAsLocale` for locale settings

== Best Practices

=== 1. Configuration Organization

==== Use Consistent Naming
* Follow the established prefix hierarchy
* Use lowercase with dots as separators
* Keep names descriptive and concise

[source,properties]
----
# Good
portal.theme.default=basic
portal.theme.available_themes=basic,dark,custom

# Avoid
portal.THEME_DEFAULT=basic
portal.themesAvailable=basic,dark,custom
----

==== Group Related Configurations
* Keep related settings under the same prefix
* Use sub-prefixes for better organization

[source,properties]
----
# Good
portal.authentication.timeout=3600
portal.authentication.max_attempts=3
portal.authentication.lockout_duration=300

# Avoid
portal.auth_timeout=3600
portal.security.attempts=3
portal.user.lockout=300
----

=== 2. Type Safety

==== Use Appropriate Configuration Types
* Leverage provided configuration types
* Validate values at configuration time

[source,java]
----
@Inject
@ConfigAsList(name = "portal.theme.available_themes")
private List<String> availableThemes;

@Inject
@ConfigAsLocale(name = "portal.locale.default")
private Locale defaultLocale;
----

==== Handle Optional Values
* Use `ConfigPropertyNullable` for optional settings
* Provide sensible defaults

[source,java]
----
@Inject
@ConfigPropertyNullable(name = "portal.custom.setting")
private String customSetting;
----

=== 3. Security Considerations

==== Sensitive Data
* Never store credentials in plain text
* Use appropriate security configuration types
* Follow the principle of least privilege

[source,properties]
----
# Good - Use security-focused configuration
portal.authentication.token.validity=3600
portal.authentication.allowed_origins=https://example.com

# Avoid - Sensitive data in plain text
portal.authentication.secret=mySecret
----

==== Access Control
* Use role-based configuration access
* Validate configuration values
* Log configuration access appropriately

=== 4. Performance Optimization

==== Caching
* Use `ConfigAsCacheConfig` for cache settings
* Configure appropriate cache sizes
* Set reasonable time-to-live values

[source,properties]
----
portal.cache.max_size=1000
portal.cache.ttl=3600
----

==== Resource Loading
* Use `ConfigAsFileLoader` for efficient file loading
* Configure appropriate refresh intervals
* Consider memory implications

=== 5. Maintainability

==== Documentation
* Document all configuration keys
* Provide valid value ranges
* Include configuration examples
* Explain the impact of each setting

==== Validation
* Implement proper validation
* Provide clear error messages
* Log configuration issues

== Common Patterns

=== Authentication Configuration
[source,properties]
----
# Basic authentication setup
portal.authentication.servlet.allowBasicAuth=false
portal.authentication.timeout=3600
portal.authentication.session.persistent=true

# Role-based access
portal.authentication.roles.admin=ADMIN
portal.authentication.roles.user=USER
----

=== Resource Configuration
[source,properties]
----
# Resource handling
portal.resource.handled_libraries=jquery,bootstrap
portal.resource.handled_suffixes=js,css
portal.resource.version=1.0.0
portal.resource.maxAge=3600

# Theme configuration
portal.theme.default=basic
portal.theme.available_themes=basic,dark,custom
----

=== View Configuration
[source,properties]
----
# View security
portal.view.non_secured=/login,/public
portal.view.suppressed=/internal
portal.view.cache.enabled=true

# View roles
portal.view.restrict.role.admin=/admin/*
portal.view.restrict.role.user=/dashboard/*
----

== Troubleshooting

=== Common Issues
* Configuration not being picked up
* Type conversion errors
* Missing required values
* Invalid configuration values

=== Resolution Steps
1. Verify configuration file location
2. Check configuration key spelling
3. Validate value types
4. Review log files for errors
5. Check configuration loading order

== Migration Guide

=== From Earlier Versions
* Document breaking changes
* Provide migration steps
* Include configuration mappings
* List deprecated settings
